import{S as oe,i as ae,s as se,e as N,a as h,b as ie,c as k,t as d,g as ce,d as fe,f as g,h as b,j as I,k as pe,l as $,m as w,n as u,C as _e,o as y,p as L,q as S,r as P,u as he,E as de,R as ge,v as me,w as $e,M as ke,x as be,y as ve,G as we,z as ye,A as Le,B as G,D as H,F as Se,H as Ce,L as Ne,P as Me}from"./FileManager.svelte_svelte_type_style_lang-2fa1e989.js";function V(s,n,l){const e=s.slice();return e[3]=n[l][0],e[4]=n[l][1],e}function X(s,n,l){const e=s.slice();return e[7]=n[l][0],e[8]=n[l][1],e}function De(s){let n=s[8]+"",l;return{c(){l=P(n)},m(e,t){k(e,l,t)},p:he,d(e){e&&b(l)}}}function Y(s){let n,l;function e(){return s[1](s[3],s[7])}return n=new _e({props:{name:s[7],$$slots:{default:[De]},$$scope:{ctx:s}}}),n.$on("click",e),{c(){y(n.$$.fragment)},m(t,o){L(n,t,o),l=!0},p(t,o){s=t;const r={};o&2048&&(r.$$scope={dirty:o,ctx:s}),n.$set(r)},i(t){l||(d(n.$$.fragment,t),l=!0)},o(t){g(n.$$.fragment,t),l=!1},d(t){S(n,t)}}}function x(s){let n,l,e,t,o,r=N(s[4]),a=[];for(let i=0;i<r.length;i+=1)a[i]=Y(X(s,r,i));const c=i=>g(a[i],1,1,()=>{a[i]=null});return{c(){n=h("div"),l=h("h2"),l.textContent=`${s[3]}`,e=$();for(let i=0;i<a.length;i+=1)a[i].c();t=$(),w(n,"class","group svelte-7u8q8i")},m(i,_){k(i,n,_),u(n,l),u(n,e);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);u(n,t),o=!0},p(i,_){if(_&1){r=N(i[4]);let f;for(f=0;f<r.length;f+=1){const m=X(i,r,f);a[f]?(a[f].p(m,_),d(a[f],1)):(a[f]=Y(m),a[f].c(),d(a[f],1),a[f].m(n,t))}for(ce(),f=r.length;f<a.length;f+=1)c(f);fe()}},i(i){if(!o){for(let _=0;_<r.length;_+=1)d(a[_]);o=!0}},o(i){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)g(a[_]);o=!1},d(i){i&&b(n),I(a,i)}}}function je(s){let n,l,e=N(s[0]),t=[];for(let r=0;r<e.length;r+=1)t[r]=x(V(s,e,r));const o=r=>g(t[r],1,1,()=>{t[r]=null});return{c(){n=h("div");for(let r=0;r<t.length;r+=1)t[r].c();ie(n,"columns","2")},m(r,a){k(r,n,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(n,null);l=!0},p(r,[a]){if(a&1){e=N(r[0]);let c;for(c=0;c<e.length;c+=1){const i=V(r,e,c);t[c]?(t[c].p(i,a),d(t[c],1)):(t[c]=x(i),t[c].c(),d(t[c],1),t[c].m(n,null))}for(ce(),c=e.length;c<t.length;c+=1)o(c);fe()}},i(r){if(!l){for(let a=0;a<e.length;a+=1)d(t[a]);l=!0}},o(r){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)g(t[a]);l=!1},d(r){r&&b(n),I(t,r)}}}function Ae(s){let n=l();function l(){let t=new Map;for(let o=0;o<window.localStorage.length;o++){let r=window.localStorage.key(o);if(r.startsWith("npt_ss/")&&!r.endsWith("/last-opened-file"))try{let a=JSON.parse(window.localStorage.getItem(r)||""),c=pe(a),[i,_,f]=r.split("/");t.has(_)||t.set(_,[]),t.get(_).push([f,c])}catch{}}for(let o of t.values())o.sort();return t}return[n,(t,o)=>window.location.href=`sketch.html?boundary=${t}&file=${o}`]}class Ee extends oe{constructor(n){super(),ae(this,n,Ae,je,se,{})}}function ee(s,n,l){const e=s.slice();return e[10]=n[l],e}function te(s,n,l){const e=s.slice();return e[10]=n[l],e}function Re(s){let n,l=N(s[2]),e=[];for(let t=0;t<l.length;t+=1)e[t]=le(ee(s,l,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=G()},m(t,o){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,o);k(t,n,o)},p(t,o){if(o&4){l=N(t[2]);let r;for(r=0;r<l.length;r+=1){const a=ee(t,l,r);e[r]?e[r].p(a,o):(e[r]=le(a),e[r].c(),e[r].m(n.parentNode,n))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(t){t&&b(n),I(e,t)}}}function Fe(s){let n,l=N(s[1]),e=[];for(let t=0;t<l.length;t+=1)e[t]=ne(te(s,l,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=G()},m(t,o){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,o);k(t,n,o)},p(t,o){if(o&2){l=N(t[1]);let r;for(r=0;r<l.length;r+=1){const a=te(t,l,r);e[r]?e[r].p(a,o):(e[r]=ne(a),e[r].c(),e[r].m(n.parentNode,n))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(t){t&&b(n),I(e,t)}}}function le(s){let n,l,e=s[10]+"",t,o;return{c(){n=h("li"),l=h("a"),t=P(e),w(l,"href",o="sketch.html?boundary=REGION_"+s[10])},m(r,a){k(r,n,a),u(n,l),u(l,t)},p(r,a){a&4&&e!==(e=r[10]+"")&&H(t,e),a&4&&o!==(o="sketch.html?boundary=REGION_"+r[10])&&w(l,"href",o)},d(r){r&&b(n)}}}function ne(s){let n,l,e=s[10]+"",t,o;return{c(){n=h("li"),l=h("a"),t=P(e),w(l,"href",o="sketch.html?boundary=LAD_"+s[10])},m(r,a){k(r,n,a),u(n,l),u(l,t)},p(r,a){a&2&&e!==(e=r[10]+"")&&H(t,e),a&2&&o!==(o="sketch.html?boundary=LAD_"+r[10])&&w(l,"href",o)},d(r){r&&b(n)}}}function re(s){var t;let n,l=((t=s[9].properties)==null?void 0:t.name)+"",e;return{c(){n=h("p"),e=P(l)},m(o,r){k(o,n,r),u(n,e)},p(o,r){var a;r&512&&l!==(l=((a=o[9].properties)==null?void 0:a.name)+"")&&H(e,l)},d(o){o&&b(n)}}}function Oe(s){let n,l=s[9]&&re(s);return{c(){l&&l.c(),n=G()},m(e,t){l&&l.m(e,t),k(e,n,t)},p(e,t){e[9]?l?l.p(e,t):(l=re(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(e){e&&b(n),l&&l.d(e)}}}function Ie(s){let n,l;return n=new Me({props:{openOn:"hover",$$slots:{default:[Oe,({data:e})=>({9:e}),({data:e})=>e?512:0]},$$scope:{ctx:s}}}),{c(){y(n.$$.fragment)},m(e,t){L(n,e,t),l=!0},p(e,t){const o={};t&33280&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){l||(d(n.$$.fragment,e),l=!0)},o(e){g(n.$$.fragment,e),l=!1},d(e){S(n,e)}}}function Pe(s){let n,l,e,t;return n=new Se({props:{filter:["==",["get","kind"],s[3]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Ce(0,.5)},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ie]},$$scope:{ctx:s}}}),n.$on("click",He),e=new Ne({props:{filter:["==",["get","kind"],s[3]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},manageHoverState:!0}}),{c(){y(n.$$.fragment),l=$(),y(e.$$.fragment)},m(o,r){L(n,o,r),k(o,l,r),L(e,o,r),t=!0},p(o,r){const a={};r&8&&(a.filter=["==",["get","kind"],o[3]]),r&32768&&(a.$$scope={dirty:r,ctx:o}),n.$set(a);const c={};r&8&&(c.filter=["==",["get","kind"],o[3]]),e.$set(c)},i(o){t||(d(n.$$.fragment,o),d(e.$$.fragment,o),t=!0)},o(o){g(n.$$.fragment,o),g(e.$$.fragment,o),t=!1},d(o){o&&b(l),S(n,o),S(e,o)}}}function Be(s){let n,l;return n=new we({props:{data:s[0],generateId:!0,$$slots:{default:[Pe]},$$scope:{ctx:s}}}),{c(){y(n.$$.fragment)},m(e,t){L(n,e,t),l=!0},p(e,t){const o={};t&1&&(o.data=e[0]),t&32776&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){l||(d(n.$$.fragment,e),l=!0)},o(e){g(n.$$.fragment,e),l=!1},d(e){S(n,e)}}}function Ge(s){let n,l,e,t,o,r,a,c,i,_,f,m,D,A,T,q,z,B,J,j,W,R,E,C,F;a=new de({props:{errorMessage:s[5]}});function ue(p){s[6](p)}let U={legend:"Boundary type",choices:[["LAD","Local Authority Districts"],["REGION","Regions"]],inlineSmall:!0};s[3]!==void 0&&(U.value=s[3]),i=new ge({props:U}),me.push(()=>$e(i,"value",ue));function Z(p,M){return p[3]=="LAD"?Fe:Re}let O=Z(s),v=O(s);return j=new Ee({}),C=new ke({props:{style:"https://api.maptiler.com/maps/uk-openzoomstack-light/style.json?key=MZEJTanw3WpxRvt7qDfo",bounds:s[4],standardControls:!0,hash:!0,$$slots:{default:[Be]},$$scope:{ctx:s}}}),C.$on("error",s[7]),{c(){n=h("div"),l=h("div"),e=h("h2"),e.textContent="NPT Scheme Sketcher",t=$(),o=h("p"),o.innerHTML=`This is an
      <a href="https://github.com/nptscot/scheme-sketcher" target="_blank">open source project</a>
      project developed by
      <a href="https://github.com/dabreegster/" target="_blank">Dustin Carlino</a>
      .`,r=$(),y(a.$$.fragment),c=$(),y(i.$$.fragment),f=$(),m=h("p"),m.textContent="Choose a boundary below or on the map to begin sketching:",D=$(),A=h("ul"),v.c(),T=$(),q=h("hr"),z=$(),B=h("p"),B.textContent="Or continue with a previously opened file:",J=$(),y(j.$$.fragment),W=$(),R=h("div"),E=h("div"),y(C.$$.fragment),ie(A,"columns","3"),w(l,"class","govuk-grid-column-one-half left govuk-prose svelte-d1l1fz"),w(E,"id","map"),w(E,"class","svelte-d1l1fz"),w(R,"class","govuk-grid-column-one-half"),w(n,"class","govuk-grid-row")},m(p,M){k(p,n,M),u(n,l),u(l,e),u(l,t),u(l,o),u(l,r),L(a,l,null),u(l,c),L(i,l,null),u(l,f),u(l,m),u(l,D),u(l,A),v.m(A,null),u(l,T),u(l,q),u(l,z),u(l,B),u(l,J),L(j,l,null),u(n,W),u(n,R),u(R,E),L(C,E,null),F=!0},p(p,[M]){const K={};!_&&M&8&&(_=!0,K.value=p[3],be(()=>_=!1)),i.$set(K),O===(O=Z(p))&&v?v.p(p,M):(v.d(1),v=O(p),v&&(v.c(),v.m(A,null)));const Q={};M&32777&&(Q.$$scope={dirty:M,ctx:p}),C.$set(Q)},i(p){F||(d(a.$$.fragment,p),d(i.$$.fragment,p),d(j.$$.fragment,p),d(C.$$.fragment,p),F=!0)},o(p){g(a.$$.fragment,p),g(i.$$.fragment,p),g(j.$$.fragment,p),g(C.$$.fragment,p),F=!1},d(p){p&&b(n),S(a),S(i),v.d(),S(j),S(C)}}}function He(s){let n=s.detail.features[0].properties;window.location.href=`sketch.html?boundary=${n.kind}_${n.name}`}function Te(s,n,l){let e={type:"FeatureCollection",features:[]},t=[],o=[],r="LAD";ve(async()=>{ye();let m=await fetch(Le);l(0,e=await m.json());for(let D of e.features)D.properties.kind=="LAD"?t.push(D.properties.name):o.push(D.properties.name);t.sort(),o.sort(),l(1,t),l(2,o)});let a=window.location.hash?void 0:[-8.943,54.631,-.901,59.489],i=new URLSearchParams(window.location.search).get("error")||"";function _(m){r=m,l(3,r)}return[e,t,o,r,a,i,_,m=>{console.log(m.detail.error)}]}class qe extends oe{constructor(n){super(),ae(this,n,Te,Ge,se,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new qe({target:document.getElementById("app")});
