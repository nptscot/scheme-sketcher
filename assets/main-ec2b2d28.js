import{S as U,i as Z,s as K,e as A,a as O,b as k,t as _,g as Q,c as V,d as m,f as b,h as P,j as Y,k as g,l as w,C as x,m as y,n as L,o as M,p as q,q as ee,E as te,M as le,r as S,u as $,v as ne,w as X,G as re,x as oe,y as ae,F as se,z as ie,L as ce,P as fe}from"./FileManager.svelte_svelte_type_style_lang-c99f0d05.js";function I(s,l,n){const e=s.slice();return e[3]=l[n][0],e[4]=l[n][1],e}function J(s,l,n){const e=s.slice();return e[7]=l[n][0],e[8]=l[n][1],e}function ue(s){let l=s[8]+"",n,e;return{c(){n=q(l),e=w()},m(t,o){k(t,n,o),k(t,e,o)},p:ee,d(t){t&&(b(n),b(e))}}}function T(s){let l,n;function e(){return s[1](s[3],s[7])}return l=new x({props:{name:s[7],$$slots:{default:[ue]},$$scope:{ctx:s}}}),l.$on("click",e),{c(){y(l.$$.fragment)},m(t,o){L(l,t,o),n=!0},p(t,o){s=t;const r={};o&2048&&(r.$$scope={dirty:o,ctx:s}),l.$set(r)},i(t){n||(_(l.$$.fragment,t),n=!0)},o(t){m(l.$$.fragment,t),n=!1},d(t){M(l,t)}}}function W(s){let l,n,e,t,o=A(s[4]),r=[];for(let a=0;a<o.length;a+=1)r[a]=T(J(s,o,a));const i=a=>m(r[a],1,1,()=>{r[a]=null});return{c(){l=g("h2"),l.textContent=`${s[3]}`,n=w();for(let a=0;a<r.length;a+=1)r[a].c();e=O()},m(a,f){k(a,l,f),k(a,n,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);k(a,e,f),t=!0},p(a,f){if(f&1){o=A(a[4]);let c;for(c=0;c<o.length;c+=1){const d=J(a,o,c);r[c]?(r[c].p(d,f),_(r[c],1)):(r[c]=T(d),r[c].c(),_(r[c],1),r[c].m(e.parentNode,e))}for(Q(),c=o.length;c<r.length;c+=1)i(c);V()}},i(a){if(!t){for(let f=0;f<o.length;f+=1)_(r[f]);t=!0}},o(a){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)m(r[f]);t=!1},d(a){a&&(b(l),b(n),b(e)),P(r,a)}}}function pe(s){let l,n,e=A(s[0]),t=[];for(let r=0;r<e.length;r+=1)t[r]=W(I(s,e,r));const o=r=>m(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();l=O()},m(r,i){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,i);k(r,l,i),n=!0},p(r,[i]){if(i&1){e=A(r[0]);let a;for(a=0;a<e.length;a+=1){const f=I(r,e,a);t[a]?(t[a].p(f,i),_(t[a],1)):(t[a]=W(f),t[a].c(),_(t[a],1),t[a].m(l.parentNode,l))}for(Q(),a=e.length;a<t.length;a+=1)o(a);V()}},i(r){if(!n){for(let i=0;i<e.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)m(t[i]);n=!1},d(r){r&&b(l),P(t,r)}}}function $e(s){let l=n();function n(){let t=new Map;for(let o=0;o<window.localStorage.length;o++){let r=window.localStorage.key(o);if(r.startsWith("npt_ss/")&&!r.endsWith("/last-opened-file"))try{let i=JSON.parse(window.localStorage.getItem(r)||""),a=Y(i),[f,c,d]=r.split("/");t.has(c)||t.set(c,[]),t.get(c).push([d,a])}catch{}}for(let o of t.values())o.sort();return t}return[l,(t,o)=>window.location.href=`sketch.html?boundary=${t}&file=${o}`]}class _e extends U{constructor(l){super(),Z(this,l,$e,pe,K,{})}}function z(s,l,n){const e=s.slice();return e[7]=l[n],e}function G(s){let l,n,e=s[7]+"",t,o;return{c(){l=g("li"),n=g("a"),t=q(e),S(n,"href",o="sketch.html?boundary=LAD_"+s[7])},m(r,i){k(r,l,i),$(l,n),$(n,t)},p(r,i){i&2&&e!==(e=r[7]+"")&&X(t,e),i&2&&o!==(o="sketch.html?boundary=LAD_"+r[7])&&S(n,"href",o)},d(r){r&&b(l)}}}function R(s){let l,n=s[6][0].properties.LAD23NM+"",e;return{c(){l=g("p"),e=q(n)},m(t,o){k(t,l,o),$(l,e)},p(t,o){o&64&&n!==(n=t[6][0].properties.LAD23NM+"")&&X(e,n)},d(t){t&&b(l)}}}function he(s){let l,n=s[6]&&R(s);return{c(){n&&n.c(),l=O()},m(e,t){n&&n.m(e,t),k(e,l,t)},p(e,t){e[6]?n?n.p(e,t):(n=R(e),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(e){e&&b(l),n&&n.d(e)}}}function me(s){let l,n;return l=new fe({props:{openOn:"hover",$$slots:{default:[he,({features:e})=>({6:e}),({features:e})=>e?64:0]},$$scope:{ctx:s}}}),{c(){y(l.$$.fragment)},m(e,t){L(l,e,t),n=!0},p(e,t){const o={};t&1088&&(o.$$scope={dirty:t,ctx:e}),l.$set(o)},i(e){n||(_(l.$$.fragment,e),n=!0)},o(e){m(l.$$.fragment,e),n=!1},d(e){M(l,e)}}}function de(s){let l,n,e,t;return l=new se({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":ie(0,.5)},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[me]},$$scope:{ctx:s}}}),l.$on("click",be),e=new ce({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},manageHoverState:!0}}),{c(){y(l.$$.fragment),n=w(),y(e.$$.fragment)},m(o,r){L(l,o,r),k(o,n,r),L(e,o,r),t=!0},p(o,r){const i={};r&1024&&(i.$$scope={dirty:r,ctx:o}),l.$set(i)},i(o){t||(_(l.$$.fragment,o),_(e.$$.fragment,o),t=!0)},o(o){m(l.$$.fragment,o),m(e.$$.fragment,o),t=!1},d(o){o&&b(n),M(l,o),M(e,o)}}}function ge(s){let l,n;return l=new re({props:{data:s[0],generateId:!0,$$slots:{default:[de]},$$scope:{ctx:s}}}),{c(){y(l.$$.fragment)},m(e,t){L(l,e,t),n=!0},p(e,t){const o={};t&1&&(o.data=e[0]),t&1024&&(o.$$scope={dirty:t,ctx:e}),l.$set(o)},i(e){n||(_(l.$$.fragment,e),n=!0)},o(e){m(l.$$.fragment,e),n=!1},d(e){M(l,e)}}}function ke(s){let l,n,e,t,o,r,i,a,f,c,d,B,F,j,v,E;o=new te({props:{errorMessage:s[3]}});let N=A(s[1]),p=[];for(let u=0;u<N.length;u+=1)p[u]=G(z(s,N,u));return d=new _e({}),v=new le({props:{style:"https://api.maptiler.com/maps/uk-openzoomstack-light/style.json?key=MZEJTanw3WpxRvt7qDfo",bounds:s[2],standardControls:!0,hash:!0,$$slots:{default:[ge]},$$scope:{ctx:s}}}),v.$on("error",s[4]),{c(){l=g("div"),n=g("div"),e=g("p"),e.textContent="TODO, insert instructions / text",t=w(),y(o.$$.fragment),r=w(),i=g("p"),i.textContent="Choose a boundary below or on the map to begin sketching:",a=w(),f=g("ul");for(let u=0;u<p.length;u+=1)p[u].c();c=w(),y(d.$$.fragment),B=w(),F=g("div"),j=g("div"),y(v.$$.fragment),S(n,"class","govuk-grid-column-one-half left govuk-prose svelte-lyn11h"),S(j,"id","map"),S(j,"class","svelte-lyn11h"),S(F,"class","govuk-grid-column-one-half"),S(l,"class","govuk-grid-row")},m(u,D){k(u,l,D),$(l,n),$(n,e),$(n,t),L(o,n,null),$(n,r),$(n,i),$(n,a),$(n,f);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(f,null);$(n,c),L(d,n,null),$(l,B),$(l,F),$(F,j),L(v,j,null),E=!0},p(u,[D]){if(D&2){N=A(u[1]);let h;for(h=0;h<N.length;h+=1){const H=z(u,N,h);p[h]?p[h].p(H,D):(p[h]=G(H),p[h].c(),p[h].m(f,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=N.length}const C={};D&1025&&(C.$$scope={dirty:D,ctx:u}),v.$set(C)},i(u){E||(_(o.$$.fragment,u),_(d.$$.fragment,u),_(v.$$.fragment,u),E=!0)},o(u){m(o.$$.fragment,u),m(d.$$.fragment,u),m(v.$$.fragment,u),E=!1},d(u){u&&b(l),M(o),P(p,u),M(d),M(v)}}}function be(s){window.location.href=`sketch.html?boundary=LAD_${s.detail.features[0].properties.LAD23NM}`}function ve(s,l,n){let e={type:"FeatureCollection",features:[]},t=[];ne(async()=>{oe();let f=await fetch(ae);n(0,e=await f.json()),n(1,t=e.features.map(c=>c.properties.LAD23NM)),t.sort()});let o=window.location.hash?void 0:[-8.943,54.631,-.901,59.489],i=new URLSearchParams(window.location.search).get("error")||"";return[e,t,o,i,f=>{console.log(f.detail.error)}]}class we extends U{constructor(l){super(),Z(this,l,ve,ke,K,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new we({target:document.getElementById("app")});
